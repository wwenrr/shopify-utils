---
alwaysApply: true
---

meta:
  name: require-feature-based-structure
  description: "Mã nguồn phải tổ chức theo feature base, mỗi folder là 1 tính năng độc lập."
rules:
  - selector: "src/"
    assert:
      - each_folder_must_contain:
          - components/
          - hooks/
          - services/
          - utils/
      - folder_structure_must_match:
          regex: "^src/features/[a-z0-9-]+/(components|hooks|services|utils)/.*"
          message: "Các thư mục và file phải nằm trong folder tính năng dưới src/features."
      - forbid_cross_feature_imports:
          pattern: "src/features/{featureA}/**/*.[jt]s"
          not_import_from: "src/features/{featureB}/"
          message: "Không được import trực tiếp code từ feature khác."
  - selector: "src/shared/"
    assert:
      - only_shared_code_allowed: true
      - forbid_import_from_features: true
  - selector: "src/app/"
    assert:
      - only_global_config_allowed: true
